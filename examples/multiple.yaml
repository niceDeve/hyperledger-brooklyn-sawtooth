id: sawtooth-multiple
name: "sawtooth-multiple"

services:
  - type: sawtooth-cluster-application
    name: "sawtooth-cluster"
    location: <add-main-location-here>

    brooklyn.config:
      sawtooth.size: 9
      sawtooth.network: "sawtooth"
      sawtooth.network.cidr: "10.0.0.0/22"
      sawtooth.cluster.name: "sawtooth"

  - type: sawtooth-remote-cluster-application
    name: "sawtooth-remote-cluster-one"
    location: <add-remote-location-here>

    brooklyn.config:
      sawtooth.size: 4
      sawtooth.network: "remote-one"
      sawtooth.network.cidr: "10.1.1.0/24"
      sawtooth.cluster.name: "remote-one"
      sawtooth.seed.network:
        $brooklyn:component("sawtooth-cluster").config("sawtooth.network")
      openvpn.config:
        $brooklyn:component("openvpn-server").attributeWhenReady("openvpn.config")

  - type: sawtooth-remote-cluster-application
    name: "sawtooth-remote-cluster-two"
    location: <add-remote-location-here>

    brooklyn.config:
      sawtooth.size: 4
      sawtooth.network: "remote-two"
      sawtooth.network.cidr: "10.1.2.0/24"
      sawtooth.cluster.name: "remote-two"
      sawtooth.seed.network:
        $brooklyn:component("sawtooth-cluster").config("sawtooth.network")
      openvpn.config:
        $brooklyn:component("openvpn-server").attributeWhenReady("openvpn.config")
