id: sawtooth-workload
name: "sawtooth-workload"
description: |
  Sawtooth workload generator for 'smallbank'.

location: <add-location-here>

services:
  - type: sawtooth-cluster-application
    id: sawtooth-cluster
    name: "sawtooth-cluster"

    brooklyn.config:
      sawtooth.version: "1.0.2"
      sawtooth.repository: "blockchaintp"
      sawtooth.size: 4
      sawtooth.network: "example"
      sawtooth.network.cidr: "10.0.0.0/22"
      sawtooth.network.gw: "10.0.0.1"
      sawtooth.cluster.name: "sawtooth"
      sawtooth.transaction-processors.spec:
        $brooklyn:entitySpec:
          type: sawtooth-transaction-processors
          brooklyn.children:
            - type: sawtooth-smallbank-tp
              name: "sawtooth-smallbank-tp"
              id: sawtooth-smallbank-tp

  - type: sawtooth-workload-application
    id: sawtooth-workload
    name: "sawtooth-workload"

    brooklyn.config:
      sawtooth.version: "1.0.2"
      sawtooth.repository: "blockchaintp"
      sawtooth.network: "example"
      cluster.endpoint: $brooklyn:entity("etcd-node").attributeWhenReady("etcd.authority")
